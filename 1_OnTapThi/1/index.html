<!DOCTYPE html>
<html lang="en">
  <head>
    <title>TEST 1</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous" />
    <link rel="stylesheet" href="fontawesome/css/all.min.css" />
    <script src="angular/angular.min.js"></script>
    <script src="angular/angular-route-1-8-2.js"></script>
  </head>
  <body ng-app="myApp">
    <div class="container mt-2" ng-controller="myCtrl">
      <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
        <li class="nav-item">
          <a class="nav-link" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">Trần Trung Nghĩa</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab" aria-controls="pills-profile" aria-selected="false">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" id="pills-contact-tab" data-toggle="pill" href="#pills-contact" role="tab" aria-controls="pills-contact" aria-selected="false">Card</a>
        </li>
      </ul>
      <div class="tab-content" id="pills-tabContent">
        <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
          
        </div>
        <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
          Home
        </div>
        <div class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">
          <div class="card">
            <div class="card-header text-center font-weight-bold bg-info text-light">
              <h3>MENU</h3>
            </div>
            <div class="card-body p-0">
              <table class="table table-bordered table-hover">
                <thead class="thead-dark">
                  <tr class="text-center">
                    <th scope="col">ID</th>
                    <th scope="col">Image</th>
                    <th scope="col">Name</th>
                    <th scope="col">Price</th>
                    <th scope="col">Quantity</th>
                    <th scope="col">Action</th>
                  </tr>
                </thead>
                <tbody class="font-weight-bold">
                  <tr ng-repeat="f in lstFood">
                    <th scope="row" class="text-center text-danger" style="text-align: center; vertical-align: middle">{{$index + 1}}</th>
                    <td>
                      <img src="{{f.image}}" alt="" width="200px" />
                    </td>
                    <td style="text-align: center; vertical-align: middle">{{f.name}}</td>
                    <td style="text-align: center; vertical-align: middle" class="text-danger">{{f.price}}</td>
                    <td class="text-center" style="text-align: center; vertical-align: middle">
                      <input type="number" ng-model="f.quantity" min=0 class="form-control text-center d-inline mr-3 w-50" style="height: 35px" />
                      <button class="btn btn-success d-inline mr-3 text-light" style="width: 50px" ng-click="up($index)">+</button>
                      <button class="btn btn-secondary d-inline text-light" style="width: 50px" ng-click="down($index)">-</button>
                    </td>
                    <td class="text-center" style="text-align: center; vertical-align: middle">
                      <button class="btn btn-info d-inline mr-3">Views</button>
                      <button class="btn btn-danger d-inline">Delete</button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="card-footer">
              <h3 class="float-right">Tổng tiền : <span class="text-danger">{{getAmount() | number: 2}}</span> VNĐ</h3>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      var app = angular.module("myApp", []);
      app.controller("myCtrl", function ($scope) {
        $scope.lstFood = [
          {
            name: "Bánh tráng trộn",
            price: 20000,
            image: "images/f1.jpg",
            quantity : 0
          },
          {
            name: "Sushi",
            price: 50000,
            image: "images/f2.jpg",
            quantity : 0
          },
          {
            name: "Kem đặc biệt",
            price: 35000,
            image: "images/f4.jpg",
            quantity : 0
          },
          {
            name: "Trái cây tươi",
            price: 150000,
            image: "images/f5.jpg",
            quantity : 0
          },
        ];

        $scope.getAmount = function () {
          var total = 0;
          for (var i = 0; i < $scope.lstFood.length; i++) {
            var qt = parseInt($scope.lstFood[i].quantity);
            total += $scope.lstFood[i].price * qt;
          }
          return total;
        };

        console.log($scope.getAmount());

        $scope.up = function(x){
          $scope.lstFood[x].quantity++;
        }

        $scope.down = function(x){
          if($scope.lstFood[x].quantity > 0){
            $scope.lstFood[x].quantity--;
          }else{
            $scope.lstFood[x].quantity = 0;
          }
        }

      });
    </script>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js" integrity="sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2" crossorigin="anonymous"></script>
  </body>
</html>
